<div class="container mt-1">
  <%= link_to "Import CSV to search", new_statistic_path, class: "btn btn-success" %>
</div>

<div class="container mt-3">
  <div class="row">
    <%= form_tag(statistics_path, method: :get) do %>

    <div class="row">
      <div class="col-4">
        <%= text_field_tag :search_keyword, params[:search_keyword], class: "form-control", placeholder: "Type your search keyword" %>
      </div>
      <div class="col-3">
        <%= submit_tag "Search", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>

<div class="container mt-3">
  <table class="table">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Keyword</th>
        <th scope="col">Status</th>
        <th scope="col">Error message</th>
        <th scope="col">Total AdWords</th>
        <th scope="col">Total links</th>
        <th scope="col">Total search results</th>
        <th scope="col">Created at</th>
        <th scope="col">HTML code</th>
      </tr>
    </thead>
    <tbody>
      <% @statistics.each do |statistic| %>
        <tr>
          <th scope="row"><%= statistic.id %></th>
          <td><%= statistic.keyword %></td>
          <td><%= statistic.status %></td>
          <td><%= statistic.error_message %></td>
          <td><%= statistic.total_ad_words %></td>
          <td><%= statistic.total_links %></td>
          <td><%= statistic.total_search_results %></td>
          <td><%= statistic.created_at&.strftime("%Y-%m-%d %H:%M:%S") %></td>
          <td><%= statistic.html_code&.truncate(200) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <%== pagy_bootstrap_nav(@pagy) %>
</div>
